<div class="fixed-action-btn" style="bottom: 80px">
	<a class="btn-floating btn-large waves-effect waves-light green white-text" ng-class="pclc.isAdding && 'disabled'" ng-click="pclc.addPatientToControl()" tooltipped="true" data-tooltip="Agregar un Nuevo Usuario a Control" data-colorclass="green" data-position="left"><i class="fas" ng-class="pclc.isAdding ? 'fa-cog fa-spin black-text' : 'fa-plus'"></i></a>
</div>
<div class="row">
	<div class="col l12">
		<div class="card grey lighten-4">
			<div class="card-content">
				<!-- <div class="row">
					<div input-field class="col l12">
						<a class="btn btn-block waves-effect waves-light" ng-click="pclc.addPatientToControl()">Agregar Usuario a Control</a>
					</div>
				</div> -->
				<br>
				<div class="row">
					<div input-field class="col l12">
						<i class="prefix fas fa-search"></i>
						<label>Buscar por Nombre de Paciente</label>
						<input type="search" ng-model="pclc.searchTerm">
					</div>
				</div>
				<br>
				<div class="row" ng-repeat-start="appointment in pclc.appointments | filter: pclc.searchTerm track by $index">
					<div class="col l12">
						<div class="card hoverable">
							<div class="card-content">
								<span class="card-title capitalize">{{appointment.meta.public.patient_fullname}}</span>
								<span class="h4" style=""><strong>Numero de Telefono: </strong> {{appointment.meta.private.phone_number || 'Sin Registro'}}</span><br>
								<span class="h4"><strong>Numero de Celular: </strong>{{appointment.meta.private.mobile_number || 'Sin Registro'}}</span><br>
								<span class="h4"><strong>RUN: </strong>{{appointment.meta.private.rut | toString | rut}}</span><br>
								<span class="h4"><strong>Alergias: </strong>{{appointment.meta.private.allergies || 'Sin Registro'}}</span><br>
								<table class="striped">
									<thead>
										<tr>
											<th>#</th>
											<th>Turno pr√≥ximo</th>
											<th>Procedimiento<br>Realizado</th>
											<th>Observaciones</th>
											<th>Notas</th>
											<th>Estado</th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="item in appointment.data">
											<td class="center-align">{{$index + 1}}</td>
											<td class="center-align">{{item.date}} a las {{item.time}}</td>
											<td class="center-align break-text">{{item.procedure_perform}}</td>
											<td class="center-align break-text">{{item.observations}}</td>
											<td class="center-align break-text">{{item.notes}}</td>
											<td class="center-align">
												<div class="fixed-action-btn horizontal" style="position: relative; right: 10%; top: 0px">
													<a class="btn-floating btn-flat waves-effect waves-light">
														<i class="fas" ng-class="item.status == 'pending' ? 'fa-minus orange-text' : item.status == 'done' ? 'fa-check green-text' : 'fa-times red-text'"></i>
													</a>
													<ul style="right: -29%; top: -74%">
														<li><a id="menu" class="btn-floating btn-flat waves-effect waves-light green" ng-click="pclc.changeAppointmentStatus('done', item)"><i class="fas fa-check white-text"></i></a></li>
														<li><a class="btn-floating btn-flat waves-effect waves-light red" ng-click="pclc.changeAppointmentStatus('absent', item)"><i class="fas fa-times white-text"></i></a></li>
													</ul>
												</div>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
							<div class="card-action">
								<a class="btn-floating btn-large halfway-fab waves-effect waves-light green left" tooltipped="true" data-tooltip="Agendar Nueva Cita" data-colorclass="green" ng-click="pclc.addNewAppointmentToPatient(appointment)"><i class="fas fa-calendar-plus"></i></a>
								<a class="btn-floating btn-large halfway-fab waves-effect waves-light cyan" style="left: 10%;" tooltipped="true" data-tooltip="Dar de Alta e Imprimir Resumen" data-colorclass="cyan" ng-click="pclc.dischargePatient(appointment)"><i class="fas fa-walking"></i></a>
								<a class="btn-floating btn-large halfway-fab waves-effect waves-light grey darken-3" style="left: 17.2%;" tooltipped="true" data-tooltip="Imprimir Resumen" data-colorclass="grey darken-3" ng-click="pclc.printAppointmentSummary(appointment)"><i class="fas fa-print"></i></a>
							</div>
						</div>
					</div>
				</div>
				<br ng-repeat-end>
			</div>
		</div>
	</div>
</div>
